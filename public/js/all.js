!function(e){"use strict";function t(e,t){var i=this;i.model=e,i.view=t,i.view.bind("newTodo",function(e){i.addItem(e)}),i.view.bind("itemEdit",function(e){i.editItem(e.id)}),i.view.bind("itemEditDone",function(e){i.editItemSave(e.id,e.title)}),i.view.bind("itemEditCancel",function(e){i.editItemCancel(e.id)}),i.view.bind("itemRemove",function(e){i.removeItem(e.id)}),i.view.bind("itemToggle",function(e){i.toggleComplete(e.id,e.completed)}),i.view.bind("removeCompleted",function(){i.removeCompletedItems()}),i.view.bind("toggleAll",function(e){i.toggleAll(e.completed)})}t.prototype.setView=function(e){var t=e.split("/")[1]||"";this._updateFilterState(t)},t.prototype.showAll=function(){var e=this;e.model.read(function(t){e.view.render("showEntries",t)})},t.prototype.showActive=function(){var e=this;e.model.read({completed:!1},function(t){e.view.render("showEntries",t)})},t.prototype.showCompleted=function(){var e=this;e.model.read({completed:!0},function(t){e.view.render("showEntries",t)})},t.prototype.addItem=function(e){var t=this;""!==e.trim()&&t.model.create(e,function(){t.view.render("clearNewTodo"),t._filter(!0)})},t.prototype.editItem=function(e){var t=this;t.model.read(e,function(i){t.view.render("editItem",{id:e,title:i[0].title})})},t.prototype.editItemSave=function(e,t){var i=this;0!==t.length?i.model.update(e,{title:t},function(){i.view.render("editItemDone",{id:e,title:t})}):i.removeItem(e)},t.prototype.editItemCancel=function(e){var t=this;t.model.read(e,function(i){t.view.render("editItemDone",{id:e,title:i[0].title})})},t.prototype.removeItem=function(e){var t,i=this;i.model.read(function(e){t=e}),t.forEach(function(t){t.id===e&&console.log("Element with ID: "+e+" has been removed.")}),i.model.remove(e,function(){i.view.render("removeItem",e)}),i._filter()},t.prototype.removeCompletedItems=function(){var e=this;e.model.read({completed:!0},function(t){t.forEach(function(t){e.removeItem(t.id)})}),e._filter()},t.prototype.toggleComplete=function(e,t,i){var o=this;o.model.update(e,{completed:t},function(){o.view.render("elementComplete",{id:e,completed:t})}),i||o._filter()},t.prototype.toggleAll=function(e){var t=this;t.model.read({completed:!e},function(i){i.forEach(function(i){t.toggleComplete(i.id,e,!0)})}),t._filter()},t.prototype._updateCount=function(){var e=this;e.model.getCount(function(t){e.view.render("updateElementCount",t.active),e.view.render("clearCompletedButton",{completed:t.completed,visible:t.completed>0}),e.view.render("toggleAll",{checked:t.completed===t.total}),e.view.render("contentBlockVisibility",{visible:t.total>0})})},t.prototype._filter=function(e){var t=this._activeRoute.charAt(0).toUpperCase()+this._activeRoute.substr(1);this._updateCount(),(e||"All"!==this._lastActiveRoute||this._lastActiveRoute!==t)&&this["show"+t](),this._lastActiveRoute=t},t.prototype._updateFilterState=function(e){this._activeRoute=e,""===e&&(this._activeRoute="All"),this._filter(),this.view.render("setFilter",e)},e.app=e.app||{},e.app.Controller=t}(window);
!function(e){"use strict";e.qs=function(e,t){return(t||document).querySelector(e)},e.qsa=function(e,t){return(t||document).querySelectorAll(e)},e.$on=function(e,t,r,o){e.addEventListener(t,r,!!o)},e.$delegate=function(t,r,o,n){var a="blur"===o||"focus"===o;e.$on(t,o,function(o){var a=o.target,c=e.qsa(r,t);Array.prototype.indexOf.call(c,a)>=0&&n.call(a,o)},a)},e.$parent=function(t,r){if(t.parentNode)return t.parentNode.tagName.toLowerCase()===r.toLowerCase()?t.parentNode:e.$parent(t.parentNode,r)},NodeList.prototype.forEach=Array.prototype.forEach}(window);
!function(t){"use strict";function o(t){this.storage=t}o.prototype.create=function(t,o){o=o||function(){};var e={title:(t=t||"").trim(),completed:!1};this.storage.save(e,o)},o.prototype.read=function(t,o){var e=typeof t;if(o=o||function(){},"function"===e)return o=t,this.storage.findAll(o);"string"===e||"number"===e?(t=parseInt(t,10),this.storage.find({id:t},o)):this.storage.find(t,o)},o.prototype.update=function(t,o,e){this.storage.save(o,e,t)},o.prototype.remove=function(t,o){this.storage.remove(t,o)},o.prototype.removeAll=function(t){this.storage.drop(t)},o.prototype.getCount=function(t){var o={active:0,completed:0,total:0};this.storage.findAll(function(e){e.forEach(function(t){t.completed?o.completed++:o.active++,o.total++}),t(o)})},t.app=t.app||{},t.app.Model=o}(window);
!function(t){"use strict";function o(t,o){if(o=o||function(){},this._dbName=t,!localStorage[t]){localStorage[t]=JSON.stringify({todos:[]})}o.call(this,JSON.parse(localStorage[t]))}o.prototype.find=function(t,o){if(o){var a=JSON.parse(localStorage[this._dbName]).todos;o.call(this,a.filter(function(o){for(var a in t)if(t[a]!==o[a])return!1;return!0}))}},o.prototype.findAll=function(t){(t=t||function(){}).call(this,JSON.parse(localStorage[this._dbName]).todos)},o.prototype.save=function(t,o,a){var i=JSON.parse(localStorage[this._dbName]),r=i.todos;o=o||function(){};for(var e="",l=!1;!l;){for(var n=0;n<6;n++)e+="0123456789".charAt(Math.floor(Math.random()*"0123456789".length));l=!0;for(n=0;n<r.length;n++)r[n].id==e&&(l=!1)}if(a){for(n=0;n<r.length;n++)if(r[n].id===a){for(var s in t)r[n][s]=t[s];break}localStorage[this._dbName]=JSON.stringify(i),o.call(this,r)}else t.id=parseInt(e),r.push(t),localStorage[this._dbName]=JSON.stringify(i),o.call(this,[t])},o.prototype.remove=function(t,o){for(var a,i=JSON.parse(localStorage[this._dbName]),r=i.todos,e=0;e<r.length;e++)r[e].id==t&&(a=r[e].id);for(e=0;e<r.length;e++)r[e].id==a&&r.splice(e,1);localStorage[this._dbName]=JSON.stringify(i),o.call(this,r)},o.prototype.drop=function(t){var o={todos:[]};localStorage[this._dbName]=JSON.stringify(o),t.call(this,o.todos)},t.app=t.app||{},t.app.Store=o}(window);
!function(e){"use strict";var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=function(e){return t[e]},o=/[&<>"'`]/g,c=new RegExp(o.source);function p(){this.defaultTemplate='<li data-id="{{id}}" class="{{completed}}"><div class="view"><input class="toggle" type="checkbox" {{checked}}><label>{{title}}</label><button class="destroy"></button></div></li>'}p.prototype.show=function(e){var t,p="";for(let i=0;i<e.length;i++){var r=this.defaultTemplate,a="",n="";e[i].completed&&(a="completed",n="checked"),p+=r=(r=(r=(r=r.replace("{{id}}",e[i].id)).replace("{{title}}",(t=e[i].title)&&c.test(t)?t.replace(o,l):t)).replace("{{completed}}",a)).replace("{{checked}}",n)}return p},p.prototype.itemCounter=function(e){return"<strong>"+e+"</strong> item"+(1===e?"":"s")+" left"},p.prototype.clearCompletedButton=function(e){return e>0?"Clear completed":""},e.app=e.app||{},e.app.Template=p}(window);
!function(e){"use strict";function t(e){this.template=e,this.ENTER_KEY=13,this.ESCAPE_KEY=27,this.$todoList=qs(".todo-list"),this.$todoItemCounter=qs(".todo-count"),this.$clearCompleted=qs(".clear-completed"),this.$main=qs(".main"),this.$footer=qs(".footer"),this.$toggleAll=qs(".toggle-all"),this.$newTodo=qs(".new-todo")}t.prototype._removeItem=function(e){var t=qs('[data-id="'+e+'"]');t&&this.$todoList.removeChild(t)},t.prototype._clearCompletedButton=function(e,t){this.$clearCompleted.innerHTML=this.template.clearCompletedButton(e),this.$clearCompleted.style.display=t?"block":"none"},t.prototype._setFilter=function(e){qs(".filters .selected").className="",qs('.filters [href="#/'+e+'"]').className="selected"},t.prototype._elementComplete=function(e,t){var i=qs('[data-id="'+e+'"]');i&&(i.className=t?"completed":"",qs("input",i).checked=t)},t.prototype._editItem=function(e,t){var i=qs('[data-id="'+e+'"]');if(i){i.className=i.className+" editing";var o=document.createElement("input");o.className="edit",i.appendChild(o),o.focus(),o.value=t}},t.prototype._editItemDone=function(e,t){var i=qs('[data-id="'+e+'"]');if(i){var o=qs("input.edit",i);i.removeChild(o),i.className=i.className.replace("editing",""),qsa("label",i).forEach(function(e){e.textContent=t})}},t.prototype.render=function(e,t){var i=this;({showEntries:function(){i.$todoList.innerHTML=i.template.show(t)},removeItem:function(){i._removeItem(t)},updateElementCount:function(){i.$todoItemCounter.innerHTML=i.template.itemCounter(t)},clearCompletedButton:function(){i._clearCompletedButton(t.completed,t.visible)},contentBlockVisibility:function(){i.$main.style.display=i.$footer.style.display=t.visible?"block":"none"},toggleAll:function(){i.$toggleAll.checked=t.checked},setFilter:function(){i._setFilter(t)},clearNewTodo:function(){i.$newTodo.value=""},elementComplete:function(){i._elementComplete(t.id,t.completed)},editItem:function(){i._editItem(t.id,t.title)},editItemDone:function(){i._editItemDone(t.id,t.title)}})[e]()},t.prototype._itemId=function(e){var t=$parent(e,"li");return parseInt(t.dataset.id,10)},t.prototype._bindItemEditDone=function(e){var t=this;$delegate(t.$todoList,"li .edit","blur",function(){this.dataset.iscanceled||e({id:t._itemId(this),title:this.value})}),$delegate(t.$todoList,"li .edit","keypress",function(e){e.keyCode===t.ENTER_KEY&&this.blur()})},t.prototype._bindItemEditCancel=function(e){var t=this;$delegate(t.$todoList,"li .edit","keyup",function(i){i.keyCode===t.ESCAPE_KEY&&(this.dataset.iscanceled=!0,this.blur(),e({id:t._itemId(this)}))})},t.prototype.bind=function(e,t){var i=this;"newTodo"===e?$on(i.$newTodo,"change",function(){t(i.$newTodo.value)}):"removeCompleted"===e?$on(i.$clearCompleted,"click",function(){t()}):"toggleAll"===e?$on(i.$toggleAll,"click",function(){t({completed:this.checked})}):"itemEdit"===e?$delegate(i.$todoList,"li label","dblclick",function(){t({id:i._itemId(this)})}):"itemRemove"===e?$delegate(i.$todoList,".destroy","click",function(){t({id:i._itemId(this)})}):"itemToggle"===e?$delegate(i.$todoList,".toggle","click",function(){t({id:i._itemId(this),completed:this.checked})}):"itemEditDone"===e?i._bindItemEditDone(t):"itemEditCancel"===e&&i._bindItemEditCancel(t)},e.app=e.app||{},e.app.View=t}(window);
!function(){"use strict";var e=new function(e){this.storage=new app.Store(e),this.model=new app.Model(this.storage),this.template=new app.Template,this.view=new app.View(this.template),this.controller=new app.Controller(this.model,this.view)}("todos-vanillajs");function t(){e.controller.setView(document.location.hash)}$on(window,"load",t),$on(window,"hashchange",t)}();
!function(){"use strict";var e,t,n,r,a,o,s=function(e){e.defaults=function(e){if(!e)return e;for(var t=1,n=arguments.length;t<n;t++){var r=arguments[t];if(r)for(var a in r)null==e[a]&&(e[a]=r[a])}return e},e.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var t=/(.)^/,n={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},r=/\\|'|\r|\n|\t|\u2028|\u2029/g;return e.template=function(a,o,s){var i;s=e.defaults({},s,e.templateSettings);var c=new RegExp([(s.escape||t).source,(s.interpolate||t).source,(s.evaluate||t).source].join("|")+"|$","g"),u=0,l="__p+='";a.replace(c,function(e,t,o,s,i){return l+=a.slice(u,i).replace(r,function(e){return"\\"+n[e]}),t&&(l+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'"),o&&(l+="'+\n((__t=("+o+"))==null?'':__t)+\n'"),s&&(l+="';\n"+s+"\n__p+='"),u=i+e.length,e}),l+="';\n",s.variable||(l="with(obj||{}){\n"+l+"}\n"),l="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+l+"return __p;\n";try{i=new Function(s.variable||"obj","_",l)}catch(e){throw e.source=l,e}if(o)return i(o,e);var f=function(t){return i.call(this,t,e)};return f.source="function("+(s.variable||"obj")+"){\n"+l+"}",f},e}({});function i(){var e=location.href.indexOf("examples/");return location.href.substr(0,e)}function c(e,t){if(!(this instanceof c))return new c(e,t);var n,r;if("object"!=typeof e)try{e=JSON.parse(e)}catch(e){return}t&&(n=t.template,r=t.framework),!n&&e.templates&&(n=e.templates.todomvc),!r&&document.querySelector("[data-framework]")&&(r=document.querySelector("[data-framework]").dataset.framework),this.template=n,e.backend?(this.frameworkJSON=e.backend,this.frameworkJSON.issueLabel=r,this.append({backend:!0})):e[r]&&(this.frameworkJSON=e[r],this.frameworkJSON.issueLabel=r,this.append()),this.fetchIssueCount()}"todomvc.com"===location.hostname&&(e=window,t=document,n="script",r="ga",e.GoogleAnalyticsObject=r,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,a=t.createElement(n),o=t.getElementsByTagName(n)[0],a.async=1,a.src="https://www.google-analytics.com/analytics.js",o.parentNode.insertBefore(a,o),ga("create","UA-31081062-1","auto"),ga("send","pageview")),c.prototype.append=function(e){var t=document.createElement("aside");if(t.innerHTML=s.template(this.template,this.frameworkJSON),t.className="learn",e&&e.backend){var n=t.querySelector(".source-links"),r=n.firstElementChild,a=n.lastElementChild,o=a.getAttribute("href");a.setAttribute("href",o.substr(o.lastIndexOf("http"))),n.innerHTML=r.outerHTML+a.outerHTML}else{var c=t.querySelectorAll(".demo-link");Array.prototype.forEach.call(c,function(e){"http"!==e.getAttribute("href").substr(0,4)&&e.setAttribute("href",i()+e.getAttribute("href"))})}document.body.className=(document.body.className+" learn-bar").trim(),document.body.insertAdjacentHTML("afterBegin",t.outerHTML)},c.prototype.fetchIssueCount=function(){var e=document.getElementById("issue-count-link");if(e){var t=e.href.replace("https://github.com","https://api.github.com/repos"),n=new XMLHttpRequest;n.open("GET",t,!0),n.onload=function(t){var n=JSON.parse(t.target.responseText);if(n instanceof Array){var r=n.length;0!==r&&(e.innerHTML="This app has "+r+" open issues",document.getElementById("issue-count").style.display="inline")}},n.send()}},"tastejs.github.io"===location.hostname&&(location.href=location.href.replace("tastejs.github.io/todomvc","todomvc.com")),function(e,t){if(!location.host)return console.info("Miss the info bar? Run TodoMVC from a server to avoid a cross-origin error.");var n=new XMLHttpRequest;n.open("GET",i()+e,!0),n.send(),n.onload=function(){200===n.status&&t&&t(n.responseText)}}("learn.json",c)}();